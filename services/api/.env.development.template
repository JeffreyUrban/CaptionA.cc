# API Service Environment Variables - Development
# Copy to .env and fill in values
#
# This template is for local development with namespace isolation from production.
# All services are namespaced with 'dev' prefix to avoid conflicts.

# =============================================================================
# NAMESPACE ISOLATION
# =============================================================================
# This is the key setting that enables dev/prod isolation
CAPTIONACC_NAMESPACE=dev

# =============================================================================
# Environment
# =============================================================================
ENVIRONMENT=development
DEBUG=true

# =============================================================================
# API
# =============================================================================
API_HOST=0.0.0.0
API_PORT=8000

# =============================================================================
# Supabase Auth (JWT verification)
# =============================================================================
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_JWT_SECRET=your-jwt-secret  # Found in Supabase Dashboard > Settings > API > JWT Secret

# =============================================================================
# Supabase Service Role (for video_database_state table)
# =============================================================================
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
# Schema name (same in both prod and dev Supabase projects)
SUPABASE_SCHEMA=captionacc

# =============================================================================
# Wasabi S3
# =============================================================================
# Separate bucket per environment (captionacc-prod / captionacc-dev)
WASABI_ACCESS_KEY_READWRITE=your-wasabi-access-key
WASABI_SECRET_KEY_READWRITE=your-wasabi-secret-key
WASABI_BUCKET=captionacc-dev
WASABI_REGION=us-east-1

# =============================================================================
# CR-SQLite Sync
# =============================================================================
# macOS: extensions/darwin-aarch64/crsqlite.dylib
# Linux: extensions/linux-x86_64/crsqlite.so
CRSQLITE_EXTENSION_PATH=extensions/darwin-aarch64/crsqlite.dylib
WORKING_COPY_DIR=/tmp/captionacc-working-dev
WASABI_UPLOAD_IDLE_MINUTES=5
WASABI_UPLOAD_CHECKPOINT_MINUTES=15

# =============================================================================
# Prefect (Remote Orchestration)
# =============================================================================
PREFECT_API_URL=https://banchelabs-gateway.fly.dev/prefect-internal/prefect/api
PREFECT_API_KEY=

# =============================================================================
# What gets namespaced:
# =============================================================================
# 1. Supabase schema: captionacc_dev (instead of captionacc_prod)
# 2. Prefect work pool: captionacc-workers-dev (instead of captionacc-workers-prod)
# 3. Prefect deployments: captionacc-dev-* (instead of captionacc-prod-*)
# 4. Modal apps: extract-full-frames-and-ocr-dev (instead of extract-full-frames-and-ocr-prod)
# 5. Working copy dir: /tmp/captionacc-working-dev
#
# What is shared:
# 1. Wasabi bucket (tenant isolation provides data separation)
# 2. Supabase project (different schema)
# 3. Prefect server (different work pool and deployments)
# 4. Modal (different app name suffixes)
